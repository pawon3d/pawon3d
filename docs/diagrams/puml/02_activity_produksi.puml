@startuml Activity - Produksi (Pesanan/Siap Beli)

|Produksi|
start
:Buka antrian produksi;

|System|
:Tampilkan produksi\nstatus Antrian;

|Produksi|
:Pilih produksi;

|System|
:Muat detail +\ntransaksi terkait;
:Ambil komposisi produk;
:Cek stok bahan\n(batch FIFO);

if (Stok cukup?) then (ya)
    |Produksi|
    :Tunjuk pekerja;
    :Mulai produksi;
    
    |System|
    :Set status Proses;
    :Kurangi batch (FIFO);
    :Catat inventory log\n(out produksi);
    
    |Produksi|
    :Input qty jadi & gagal;
    
    |System|
    :Update detail produksi;
    :Tambah stok produk jadi;
    :Update status\nproduksi Selesai;
    :Jika terkait transaksi ->\nset status Dapat Diambil;
    :Kirim notifikasi selesai;
else (tidak)
    |System|
    :Tolak mulai\n(stok kurang);
endif

stop

@enduml
