@startuml Activity Diagram - Proses Mengelola Bahan Baku

|Inventori|
start
:Membuka halaman Bahan Baku;

if (Aksi?) then (Tambah)
    :Klik tombol Tambah Bahan;
    :Mengisi form bahan baku;
    note right
      Data bahan:
      - Nama bahan
      - Kategori bahan
      - Stok minimum
      - Deskripsi
      - Status aktif
    end note
    
    :Menentukan satuan bahan;
    
    while (Tambah satuan lagi?) is (Ya)
        :Pilih satuan (unit);
        
        |Sistem|
        if (Satuan dalam grup konversi yang sama?) then (Ya)
            :Hitung konversi otomatis;
            note right
              Contoh:
              Satuan utama: kg
              Satuan tambahan: g
              Konversi: 1 g = 0.001 kg
              (otomatis dari grup "Berat")
            end note
        else (Tidak)
            |Inventori|
            :Masukkan kuantitas konversi manual;
        endif
        
        |Inventori|
        :Tandai sebagai satuan utama (opsional);
    endwhile (Tidak)
    
    :Menyimpan bahan baku;
    
    |Sistem|
    :Validasi data bahan;
    
    if (Data valid?) then (Ya)
        :Menyimpan ke database;
        :Set status: Kosong;
        :Menampilkan pesan sukses;
    else (Tidak)
        :Menampilkan pesan error;
    endif
    
else if (Aksi?) then (Edit)
    |Inventori|
    :Memilih bahan yang akan diedit;
    :Mengubah data bahan;
    :Menyimpan perubahan;
    
    |Sistem|
    :Validasi data;
    :Update data bahan;
    :Menampilkan pesan sukses;
    
else if (Aksi?) then (Lihat Batch)
    |Inventori|
    :Memilih bahan baku;
    
    |Sistem|
    :Menampilkan daftar batch;
    note right
      Info batch (FIFO):
      - Tanggal masuk
      - Kuantitas tersisa
      - Tanggal expired
      - Harga beli
    end note
    
    |Inventori|
    if (Hapus batch?) then (Ya)
        :Memilih batch yang akan dihapus;
        :Konfirmasi penghapusan;
        
        |Sistem|
        :Menghapus batch;
        :Update total stok bahan;
        :Catat log inventori;
    else (Tidak)
    endif
    
else if (Aksi?) then (Lihat Alur)
    |Inventori|
    :Memilih bahan baku;
    
    |Sistem|
    :Menampilkan riwayat pergerakan stok;
    note right
      Log inventori:
      - Masuk (dari belanja)
      - Keluar (produksi)
      - Rusak/Hilang (hitung)
      - Penyesuaian
    end note
    
else (Hapus)
    |Inventori|
    :Memilih bahan yang akan dihapus;
    :Konfirmasi penghapusan;
    
    |Sistem|
    if (Bahan digunakan di produk?) then (Ya)
        :Menampilkan peringatan;
        :Nonaktifkan bahan (soft delete);
    else (Tidak)
        :Hapus bahan permanen;
    endif
    :Menampilkan pesan sukses;
endif

stop

@enduml
