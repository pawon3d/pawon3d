@startuml activity-login
title Activity Diagram - Login

skinparam ConditionEndStyle hline

start
:Pengguna membuka halaman login;
:Pengguna memasukkan email dan password;
:Pengguna mengklik tombol "Masuk";

partition "Sistem (Livewire & Laravel)" {
    :Validasi input form;
    if (Validasi sukses?) then (Ya)
        :Cek Rate Limiting;
        if (Terlalu banyak percobaan?) then (Ya)
            :Tampilkan pesan error (Throttle);
            stop
        else (Tidak)
            :Auth::attempt(email, password);
            if (Kombinasi benar?) then (Ya)
                :Ambil data user;
                if (Akun sudah diaktivasi (activated_at)?) then (Ya)
                    if (Akun aktif (is_active)?) then (Ya)
                        :Clear Rate Limiter;
                        :Regenerasi Session;
                        :Redirect ke Dashboard (Ringkasan Umum);
                        stop
                    else (Tidak)
                        :Tampilkan pesan "Akun dinonaktifkan";
                        :Logout;
                        stop
                    endif
                else (Tidak)
                    :Tampilkan pesan "Akun belum diaktivasi";
                    :Logout;
                    stop
                endif
            else (Tidak)
                :Tambah hit Rate Limiter;
                :Tampilkan pesan "Salah email atau password";
                stop
            endif
        endif
    else (Tidak)
        :Tampilkan pesan validasi error;
        stop
    endif
}

@enduml
