@startuml Activity Diagram - Proses Mengelola Pelanggan

|Pemilik|
start
:Membuka halaman Pelanggan;

if (Aksi?) then (Tambah)
    :Klik tombol Tambah Pelanggan;
    :Mengisi form pelanggan;
    note right
      Data pelanggan:
      - Nama
      - Nomor telepon (unik)
    end note
    
    :Menyimpan pelanggan;
    
    |Sistem|
    :Validasi nomor telepon;
    
    if (Nomor telepon sudah ada?) then (Ya)
        :Menampilkan pesan error;
        :Nomor telepon harus unik;
    else (Tidak)
        :Menyimpan ke database;
        :Set poin awal: 0;
        :Menampilkan pesan sukses;
    endif
    
else if (Aksi?) then (Edit)
    |Pemilik|
    :Memilih pelanggan yang akan diedit;
    :Mengubah data pelanggan;
    :Menyimpan perubahan;
    
    |Sistem|
    :Validasi data;
    :Update data pelanggan;
    :Menampilkan pesan sukses;
    
else if (Aksi?) then (Lihat Detail)
    |Pemilik|
    :Memilih pelanggan;
    
    |Sistem|
    :Menampilkan detail pelanggan;
    :Menampilkan total poin;
    
    :Menampilkan riwayat poin;
    note right
      Riwayat poin:
      - Dapat poin (dari transaksi)
      - Pakai poin (diskon)
      - Tanggal & deskripsi
    end note
    
    :Menampilkan riwayat transaksi;
    note right
      Riwayat transaksi:
      - Nomor invoice
      - Total belanja
      - Status pembayaran
      - Tanggal
    end note
    
else if (Aksi?) then (Atur Poin)
    |Pemilik|
    :Memilih pelanggan;
    :Memilih aksi poin;
    
    if (Aksi poin?) then (Tambah Manual)
        :Memasukkan jumlah poin;
        :Memasukkan alasan;
        
        |Sistem|
        :Menambah poin pelanggan;
        :Catat riwayat poin (manual);
        
    else (Kurangi Manual)
        |Pemilik|
        :Memasukkan jumlah poin;
        :Memasukkan alasan;
        
        |Sistem|
        if (Poin cukup?) then (Ya)
            :Mengurangi poin pelanggan;
            :Catat riwayat poin (manual);
        else (Tidak)
            :Menampilkan pesan error;
        endif
    endif
    
    |Sistem|
    :Menampilkan pesan sukses;
    
else (Hapus)
    |Pemilik|
    :Memilih pelanggan yang akan dihapus;
    :Konfirmasi penghapusan;
    
    |Sistem|
    if (Pelanggan punya transaksi?) then (Ya)
        :Menampilkan peringatan;
        :Pelanggan tidak bisa dihapus;
    else (Tidak)
        :Hapus pelanggan;
        :Menampilkan pesan sukses;
    endif
endif

stop

@enduml
